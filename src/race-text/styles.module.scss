.raceText {
  padding: 8px;
  max-width: 500px;
  background: #ddd;

  > * {
    color: blue;
  }
}

.word {
  position: relative;
  display: inline-block;
  // margin-right: 6px;
  margin-bottom: 4px;

  .raceText[data-state~="race"] & {
    &[data-wordstate="prev"] { }
    &[data-wordstate="current"] { }
    &[data-wordstate="next"] { }
  }
}

.letter {
  position: relative;
  display: inline-block;
  white-space: pre;

  transition: all .08s ease-out;

  .raceText[data-state~="race"] & {
    &[data-letterstate="prev"] {
      opacity: .5;
      transform: scale(.85);
    }
    &[data-letterstate="current"] {
      &::before {
        content: "";
        display: block;
        position: absolute;
        left: -2px;
        bottom: -1px;
        width: 2px;
        height: 24px;
        background: rgb(0,0,0,.8);
      }
    }
    &[data-letterstate="next"] { }
  }
}

.letter {
  .word[data-wordstate="current"] & {
    &[data-letterstate="current"]:not(:last-child),
    &[data-letterstate="next"]:not(:last-child) {
      &::after {
        content: "";
        display: block;
        position: absolute;
        bottom: -3px;
        right: 0;
        left: 0;
        height: 2px;
        border-radius: 2px;
        background: rgba(0,0,0,.12);
      }
    }
  }
}
